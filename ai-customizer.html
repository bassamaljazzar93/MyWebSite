<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="AI Portfolio Customizer - Build and customize your portfolio with AI assistance">
    <title>AI Portfolio Customizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #0a0e27;
            color: #e5e7eb;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* Header */
        .header {
            background-color: #0f1629;
            border-bottom: 2px solid #00d9ff;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #00d9ff;
            font-size: 24px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header .subtitle {
            color: #9ca3af;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .lang-switch {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .lang-switch:hover {
            background: #00d9ff;
            color: #0a0e27;
        }

        .back-btn {
            background: rgba(124, 58, 237, 0.1);
            border: 1px solid #7c3aed;
            color: #7c3aed;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #7c3aed;
            color: white;
        }

        /* Main Container */
        .main-container {
            display: grid;
            grid-template-columns: 350px 1fr 1fr;
            height: calc(100vh - 70px);
            gap: 0;
            overflow: hidden;
        }

        /* Panel Styles */
        .panel {
            background-color: #0f1629;
            border-right: 1px solid rgba(0, 217, 255, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel:last-child {
            border-right: none;
        }

        .panel-header {
            background-color: #1a1f3a;
            padding: 15px 20px;
            border-bottom: 1px solid rgba(0, 217, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-title {
            color: #00d9ff;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 20px;
        }

        .panel-content::-webkit-scrollbar {
            width: 8px;
        }

        .panel-content::-webkit-scrollbar-track {
            background: #0a0e27;
        }

        .panel-content::-webkit-scrollbar-thumb {
            background: #00d9ff;
            border-radius: 4px;
        }

        /* AI Assistant Panel */
        .api-key-section {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid #f59e0b;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .api-key-section h3 {
            color: #f59e0b;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .api-key-section input {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            color: #e5e7eb;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .api-key-section input:focus {
            outline: none;
            border-color: #f59e0b;
        }

        .api-key-section p {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 8px;
        }

        .api-key-section a {
            color: #f59e0b;
            text-decoration: none;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid rgba(0, 217, 255, 0.3);
            color: #00d9ff;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quick-btn:hover {
            background: rgba(0, 217, 255, 0.2);
            border-color: #00d9ff;
            transform: translateY(-2px);
        }

        .chat-container {
            flex: 1;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            overflow-y: auto;
            max-height: 300px;
        }

        .chat-message {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 8px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.user {
            background: rgba(0, 217, 255, 0.1);
            border-left: 3px solid #00d9ff;
        }

        .chat-message.ai {
            background: rgba(124, 58, 237, 0.1);
            border-left: 3px solid #7c3aed;
        }

        .chat-message .label {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .chat-message.user .label {
            color: #00d9ff;
        }

        .chat-message.ai .label {
            color: #7c3aed;
        }

        .chat-input-area {
            display: flex;
            gap: 10px;
        }

        .chat-input-area textarea {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            color: #e5e7eb;
            font-family: inherit;
            font-size: 13px;
            resize: none;
            height: 60px;
        }

        .chat-input-area textarea:focus {
            outline: none;
            border-color: #00d9ff;
        }

        .btn {
            background: linear-gradient(135deg, #00d9ff, #7c3aed);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 217, 255, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Code Editor Panel */
        .editor-actions {
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid rgba(0, 217, 255, 0.3);
            color: #00d9ff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .icon-btn:hover {
            background: rgba(0, 217, 255, 0.2);
            border-color: #00d9ff;
        }

        .CodeMirror {
            height: 100% !important;
            font-size: 14px;
            border-radius: 8px;
        }

        .editor-wrapper {
            flex: 1;
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 8px;
            overflow: hidden;
        }

        /* Live Preview Panel */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            color: #22c55e;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .preview-frame {
            flex: 1;
            width: 100%;
            height: 100%;
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 8px;
            background: white;
            overflow: auto;
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 1fr;
                overflow-y: auto;
            }

            .panel {
                border-right: none;
                border-bottom: 1px solid rgba(0, 217, 255, 0.2);
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 10px;
            }

            .main-container {
                height: calc(100vh - 120px);
            }

            .panel {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div>
            <h1>ü§ñ AI Portfolio Customizer</h1>
            <div class="subtitle" data-en="Customize your portfolio in real-time with AI assistance powered by Groq" data-ar="ÿÆÿµÿµ ÿ®Ÿàÿ±ÿ™ŸÅŸàŸÑŸäŸàŸÉ ŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿ®ŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿµŸÜÿßÿπŸä ŸÖŸÜ Groq">Customize your portfolio in real-time with AI assistance powered by Groq</div>
        </div>
        <div class="header-actions">
            <button class="lang-switch" onclick="toggleLanguage()">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
            <a href="index.html" class="back-btn">‚Üê <span data-en="Back to Portfolio" data-ar="ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ®Ÿàÿ±ÿ™ŸÅŸàŸÑŸäŸà">Back to Portfolio</span></a>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- AI Assistant Panel -->
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">üß† <span data-en="AI Assistant" data-ar="ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∞ŸÉŸä">AI Assistant</span></div>
            </div>
            <div class="panel-content">
                <div class="api-key-section">
                    <h3 data-en="Groq API Key" data-ar="ŸÖŸÅÿ™ÿßÿ≠ Groq API">Groq API Key</h3>
                    <input type="password" id="apiKey" placeholder="gsk_..." data-en-placeholder="Enter your Groq API key" data-ar-placeholder="ÿ£ÿØÿÆŸÑ ŸÖŸÅÿ™ÿßÿ≠ Groq API">
                    <p data-en="Get your free API key from" data-ar="ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖŸÅÿ™ÿßÿ≠ API ŸÖÿ¨ÿßŸÜŸä ŸÖŸÜ">Get your free API key from <a href="https://console.groq.com/keys" target="_blank">console.groq.com</a></p>
                </div>

                <div class="quick-actions">
                    <button class="quick-btn" onclick="quickAction('color')" data-en="üé® Change Colors" data-ar="üé® ÿ∫Ÿäÿ± ÿßŸÑÿ£ŸÑŸàÿßŸÜ">üé® Change Colors</button>
                    <button class="quick-btn" onclick="quickAction('font')" data-en="‚úçÔ∏è Change Font" data-ar="‚úçÔ∏è ÿ∫Ÿäÿ± ÿßŸÑÿÆÿ∑">‚úçÔ∏è Change Font</button>
                    <button class="quick-btn" onclick="quickAction('section')" data-en="‚ûï Add Section" data-ar="‚ûï ÿ£ÿ∂ŸÅ ŸÇÿ≥ŸÖ">‚ûï Add Section</button>
                    <button class="quick-btn" onclick="quickAction('animation')" data-en="‚ú® Add Animation" data-ar="‚ú® ÿ£ÿ∂ŸÅ ÿ≠ÿ±ŸÉÿ©">‚ú® Add Animation</button>
                </div>

                <div class="chat-container" id="chatContainer">
                    <div class="chat-message ai">
                        <div class="label" data-en="AI Assistant" data-ar="ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∞ŸÉŸä">AI Assistant</div>
                        <div data-en="Hello! I'm your AI assistant powered by Groq's Llama 3.3 70B. I can help you customize your portfolio by modifying colors, fonts, adding sections, animations, and more. Just tell me what you want to change!" data-ar="ŸÖÿ±ÿ≠ÿ®ÿßŸã! ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ ÿßŸÑÿ∞ŸÉŸä ÿßŸÑŸÖÿØÿπŸàŸÖ ÿ®ŸÄ Llama 3.3 70B ŸÖŸÜ Groq. ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ŸÅŸä ÿ™ÿÆÿµŸäÿµ ÿ®Ÿàÿ±ÿ™ŸÅŸàŸÑŸäŸàŸÉ ÿ®ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ŸàÿßŸÑÿÆÿ∑Ÿàÿ∑ Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿ£ŸÇÿ≥ÿßŸÖ Ÿàÿ≠ÿ±ŸÉÿßÿ™ ŸàÿßŸÑŸÖÿ≤ŸäÿØ. ŸÅŸÇÿ∑ ÿ£ÿÆÿ®ÿ±ŸÜŸä ÿ®ŸÖÿß ÿ™ÿ±ŸäÿØ ÿ™ÿ∫ŸäŸäÿ±Ÿá!">Hello! I'm your AI assistant powered by Groq's Llama 3.3 70B. I can help you customize your portfolio by modifying colors, fonts, adding sections, animations, and more. Just tell me what you want to change!</div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <textarea id="userInput" placeholder="Ask AI to customize your portfolio..." data-en-placeholder="Ask AI to customize your portfolio..." data-ar-placeholder="ÿßÿ≥ÿ£ŸÑ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿµŸÜÿßÿπŸä ŸÑÿ™ÿÆÿµŸäÿµ ÿ®Ÿàÿ±ÿ™ŸÅŸàŸÑŸäŸàŸÉ..."></textarea>
                    <button class="btn" onclick="sendMessage()" id="sendBtn" data-en="Send" data-ar="ÿ•ÿ±ÿ≥ÿßŸÑ">Send</button>
                </div>
            </div>
        </div>

        <!-- Code Editor Panel -->
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">üíª <span data-en="Code Editor" data-ar="ŸÖÿ≠ÿ±ÿ± ÿßŸÑŸÉŸàÿØ">Code Editor</span></div>
                <div class="editor-actions">
                    <button class="icon-btn" onclick="copyCode()" data-en="üìã Copy" data-ar="üìã ŸÜÿ≥ÿÆ">üìã Copy</button>
                    <button class="icon-btn" onclick="downloadCode()" data-en="üíæ Download" data-ar="üíæ ÿ™ÿ≠ŸÖŸäŸÑ">üíæ Download</button>
                    <button class="icon-btn" onclick="resetCode()" data-en="üîÑ Reset" data-ar="üîÑ ÿ•ÿπÿßÿØÿ©">üîÑ Reset</button>
                </div>
            </div>
            <div class="panel-content" style="padding: 0;">
                <div class="editor-wrapper">
                    <textarea id="codeEditor">
                </div>
            </div>
        </div>

        <!-- Live Preview Panel -->
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">üëÅÔ∏è <span data-en="Live Preview" data-ar="ŸÖÿπÿßŸäŸÜÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©">Live Preview</span></div>
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span data-en="Live" data-ar="ŸÖÿ®ÿßÿ¥ÿ±">Live</span>
                </div>
            </div>
            <div class="panel-content" style="padding: 0;">
                <iframe class="preview-frame" id="previewFrame"></iframe>
            </div>
        </div>
    </div>

    <script>
        let editor;
        let currentLanguage = 'en';
        const GROQ_API_URL = 'https://api.groq.com/openai/v1/chat/completions';

        // Initialize CodeMirror
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication
            const session = JSON.parse(localStorage.getItem('session') || sessionStorage.getItem('session') || 'null');
            if (!session || !session.loggedIn) {
                // Redirect to auth page if not logged in
                window.location.href = 'auth.html';
                return;
            }

            editor = CodeMirror.fromTextArea(document.getElementById('codeEditor'), {
                mode: 'htmlmixed',
                theme: 'dracula',
                lineNumbers: true,
                autoCloseTags: true,
                autoCloseBrackets: true,
                matchBrackets: true,
                indentUnit: 4,
                tabSize: 4,
                lineWrapping: true
            });

            // Set initial template
            const initialCode = getPortfolioTemplate();
            editor.setValue(initialCode);

            // Update preview on change
            editor.on('change', function() {
                updatePreview();
            });

            // Initial preview
            updatePreview();

            // Load saved API key
            const savedKey = localStorage.getItem('groq_api_key');
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
            }

            // Save API key on change
            document.getElementById('apiKey').addEventListener('change', function() {
                localStorage.setItem('groq_api_key', this.value);
            });

            // Enter to send
            document.getElementById('userInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        });

        function getPortfolioTemplate() {
            return "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n    <meta name=\"description\" content=\"Mechatronics Engineer with 8+ years in robotics, automation, and innovation. Expert in 3D design, Python development, and complex system analysis. Creator of Bu Saif humanoid robot and contributor to US Patent 11573635.\">\n    <meta name=\"keywords\" content=\"Mechatronics Engineer, Robotics, Automation, Python, 3D Design, Bu Saif, UAE, Abu Dhabi\">\n    <meta name=\"author\" content=\"Bassam Walid Aljazzar\">\n    <title>Bassam Aljazzar - Mechatronics Engineer Portfolio</title>\n    <script type=\"module\" src=\"https://unpkg.com/@splinetool/viewer@1.10.76/build/spline-viewer.js\"></script>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background-color: #0a0a0a;\n            color: #00ff00;\n            font-family: 'Courier New', 'Monaco', monospace;\n            overflow: hidden;\n            height: 100vh;\n            max-height: 100vh;\n            margin: 0;\n            padding: 0;\n        }\n\n        /* Header */\n        .header {\n            background-color: #0f0f0f;\n            border-bottom: 2px solid #00ff00;\n            padding: 15px 30px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .header h1 {\n            color: #00ff00;\n            font-size: 24px;\n            margin: 0;\n        }\n\n        .header .subtitle {\n            color: #888;\n            font-size: 14px;\n        }\n\n        .nav {\n            color: #888;\n            font-size: 12px;\n        }\n\n        .nav a {\n            color: #00ff00;\n            text-decoration: none;\n            margin: 0 8px;\n            cursor: pointer;\n        }\n\n        .nav a:hover {\n            color: #5BCEFA;\n        }\n\n        /* Main Layout */\n        .main-container {\n            display: flex;\n            height: calc(100vh - 70px);\n            max-height: calc(100vh - 70px);\n            gap: 0;\n            overflow: hidden;\n        }\n\n        /* 3D Viewer Section (Left) */\n        .viewer-section {\n            flex: 0 0 40%;\n            background-color: #0f0f0f;\n            border-right: 2px solid #00ff00;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            position: relative;\n            overflow: hidden;\n            -webkit-tap-highlight-color: transparent;\n            user-select: none;\n            -webkit-user-select: none;\n        }\n\n        spline-viewer {\n            width: 100%;\n            height: 100%;\n            border: none;\n            pointer-events: auto;\n            touch-action: pan-x pan-y pinch-zoom;\n        }\n\n        /* Terminal Section (Right) */\n        .terminal-section {\n            flex: 1;\n            background-color: #0a0a0a;\n            display: flex;\n            flex-direction: column;\n            padding: 20px;\n            overflow: hidden;\n            min-height: 0;\n        }\n\n        .terminal-box {\n            background-color: #0f0f0f;\n            border: 2px solid #00ff00;\n            border-radius: 8px;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            max-height: 100%;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);\n            overflow: hidden;\n        }\n\n        .terminal-header {\n            background-color: #1a1a1a;\n            padding: 10px 15px;\n            border-bottom: 1px solid #00ff00;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n        }\n\n        .terminal-button {\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            background-color: #ff5f56;\n        }\n\n        .terminal-button:nth-child(2) {\n            background-color: #ffbd2e;\n        }\n\n        .terminal-button:nth-child(3) {\n            background-color: #27c93f;\n        }\n\n        .terminal-title {\n            flex: 1;\n            text-align: center;\n            color: #888;\n            font-size: 12px;\n        }\n\n        .terminal-output {\n            flex: 1;\n            overflow-y: auto;\n            overflow-x: hidden;\n            padding: 20px;\n            padding-bottom: 10px;\n            font-size: 14px;\n            min-height: 0;\n            -webkit-overflow-scrolling: touch;\n        }\n\n        .terminal-output::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .terminal-output::-webkit-scrollbar-track {\n            background: #1a1a1a;\n        }\n\n        .terminal-output::-webkit-scrollbar-thumb {\n            background: #00ff00;\n            border-radius: 4px;\n        }\n\n        .output-line {\n            margin-bottom: 8px;\n            word-wrap: break-word;\n        }\n\n        .prompt-line {\n            display: flex;\n            align-items: center;\n            margin-bottom: 8px;\n        }\n\n        .username {\n            color: #5BCEFA;\n        }\n\n        .separator {\n            color: #fff;\n        }\n\n        .directory {\n            color: #F5A9B8;\n        }\n\n        .command {\n            color: #ffa500;\n        }\n\n        .terminal-footer {\n            background-color: #1a1a1a;\n            padding: 15px;\n            border-top: 1px solid #00ff00;\n            flex-shrink: 0;\n            min-height: 60px;\n        }\n\n        .welcome-text {\n            color: #888;\n            font-size: 12px;\n            line-height: 1.6;\n            text-align: center;\n        }\n\n        .welcome-text .highlight {\n            color: #ffa500;\n            font-weight: bold;\n        }\n\n        /* Chat mode styles */\n        .chat-message {\n            margin: 10px 0;\n            padding: 10px;\n            border-left: 3px solid #5BCEFA;\n            background: rgba(91, 206, 250, 0.05);\n        }\n\n        .ai-thinking {\n            animation: pulse 1.5s infinite;\n        }\n\n        @keyframes pulse {\n            0%, 100% { opacity: 0.5; }\n            50% { opacity: 1; }\n        }\n\n        .terminal-input-line {\n            display: flex;\n            align-items: center;\n            padding: 15px;\n            background-color: #0a0a0a;\n            border-top: 1px solid #333;\n            flex-shrink: 0;\n            min-height: 50px;\n            cursor: text;\n            -webkit-tap-highlight-color: transparent;\n        }\n\n        .terminal-input-line:hover {\n            background-color: #0f0f0f;\n        }\n\n        #commandInput {\n            background: transparent;\n            border: none;\n            outline: none;\n            color: #00ff00;\n            font-family: inherit;\n            font-size: inherit;\n            flex: 1;\n            caret-color: #00ff00;\n            margin-left: 5px;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n        }\n\n        #commandInput:focus {\n            outline: none;\n        }\n\n        /* Responsive */\n        @media (max-width: 1200px) {\n            .main-container {\n                flex-direction: column;\n            }\n\n            .viewer-section {\n                flex: 0 0 300px;\n                min-height: 300px;\n                border-right: none;\n                border-bottom: 2px solid #00ff00;\n            }\n\n            .terminal-section {\n                flex: 1;\n                min-height: 400px;\n                display: flex;\n                flex-direction: column;\n            }\n\n            .terminal-box {\n                max-height: calc(100vh - 350px);\n                min-height: 400px;\n            }\n\n            .terminal-output {\n                font-size: 13px;\n                padding-bottom: 5px;\n            }\n\n            .terminal-footer {\n                flex-shrink: 0;\n            }\n        }\n\n        @media (max-width: 768px) {\n            body {\n                padding: 0;\n                height: 100vh;\n                max-height: 100vh;\n                overflow: hidden;\n            }\n\n            .main-container {\n                height: calc(100vh - 120px);\n                max-height: calc(100vh - 120px);\n            }\n\n            .header {\n                flex-direction: column;\n                gap: 10px;\n                padding: 12px 15px;\n            }\n\n            .header h1 {\n                font-size: 20px;\n            }\n\n            .header .subtitle {\n                font-size: 12px;\n            }\n\n            .nav {\n                display: flex;\n                flex-wrap: wrap;\n                justify-content: center;\n                font-size: 11px;\n            }\n\n            .nav a {\n                margin: 0 5px;\n            }\n\n            .viewer-section {\n                flex: 0 0 250px;\n                min-height: 250px;\n            }\n\n            .terminal-section {\n                padding: 10px;\n                min-height: 350px;\n            }\n\n            .terminal-box {\n                border-radius: 0;\n                max-height: calc(100vh - 320px);\n                min-height: 350px;\n            }\n\n            .terminal-output {\n                padding: 15px;\n                padding-bottom: 5px;\n                font-size: 12px;\n                flex: 1;\n                min-height: 0;\n            }\n\n            .terminal-input-line {\n                padding: 12px;\n                font-size: 12px;\n                flex-shrink: 0;\n            }\n\n            .terminal-footer {\n                padding: 12px;\n                flex-shrink: 0;\n            }\n\n            .welcome-text {\n                font-size: 10px;\n            }\n\n            #commandInput {\n                font-size: 12px;\n            }\n        }\n\n        @media (max-width: 480px) {\n            .header h1 {\n                font-size: 18px;\n            }\n\n            .header .subtitle {\n                font-size: 11px;\n            }\n\n            .nav {\n                font-size: 10px;\n            }\n\n            .nav a {\n                margin: 2px 3px;\n            }\n\n            .viewer-section {\n                flex: 0 0 200px;\n                min-height: 200px;\n            }\n\n            .terminal-section {\n                padding: 5px;\n                min-height: 300px;\n            }\n\n            .terminal-box {\n                max-height: calc(100vh - 280px);\n                min-height: 300px;\n            }\n\n            .terminal-header {\n                padding: 8px 12px;\n                flex-shrink: 0;\n            }\n\n            .terminal-title {\n                font-size: 11px;\n            }\n\n            .terminal-output {\n                padding: 12px;\n                padding-bottom: 5px;\n                font-size: 11px;\n                flex: 1;\n                min-height: 0;\n            }\n\n            .terminal-input-line {\n                padding: 10px;\n                font-size: 11px;\n                flex-shrink: 0;\n            }\n\n            .terminal-footer {\n                padding: 10px;\n                flex-shrink: 0;\n            }\n\n            .welcome-text {\n                font-size: 9px;\n                line-height: 1.4;\n            }\n\n            #commandInput {\n                font-size: 11px;\n            }\n\n            .username, .directory, .separator {\n                font-size: 11px;\n            }\n\n            /* Make pre text smaller on mobile */\n            pre {\n                font-size: 0.5em !important;\n            }\n        }\n\n        /* Landscape mode for mobile */\n        @media (max-width: 900px) and (orientation: landscape) {\n            .main-container {\n                flex-direction: row;\n            }\n\n            .viewer-section {\n                flex: 0 0 35%;\n                border-right: 2px solid #00ff00;\n                border-bottom: none;\n            }\n\n            .terminal-section {\n                flex: 1;\n            }\n        }\n\n        /* Very small screens */\n        @media (max-width: 320px) {\n            .main-container {\n                height: calc(100vh - 100px);\n                max-height: calc(100vh - 100px);\n            }\n\n            .header h1 {\n                font-size: 16px;\n            }\n\n            .nav a {\n                font-size: 9px;\n                margin: 2px;\n            }\n\n            .viewer-section {\n                flex: 0 0 180px;\n                min-height: 180px;\n            }\n\n            .terminal-box {\n                max-height: calc(100vh - 250px);\n                min-height: 280px;\n            }\n\n            .terminal-output,\n            .terminal-input-line,\n            #commandInput {\n                font-size: 10px;\n            }\n\n            .terminal-output {\n                padding: 10px;\n                padding-bottom: 5px;\n            }\n\n            .welcome-text {\n                font-size: 8px;\n            }\n\n            .terminal-footer {\n                padding: 8px;\n                flex-shrink: 0;\n            }\n        }\n\n        /* iOS Safari fixes */\n        @supports (-webkit-touch-callout: none) {\n            body {\n                height: -webkit-fill-available;\n            }\n            \n            .main-container {\n                height: calc(100vh - 70px);\n                height: calc(var(--vh, 1vh) * 100 - 70px);\n            }\n        }\n    </style>\n</head>\n<body>\n    <!-- Header -->\n    <div class=\"header\">\n        <div>\n            <h1>Bassam Walid Aljazzar</h1>\n            <div class=\"subtitle\">Mechatronics Engineer</div>\n        </div>\n        <div class=\"nav\">\n            <a onclick=\"executeNavCommand('help')\">help</a> |\n            <a onclick=\"executeNavCommand('about')\">about</a> |\n            <a onclick=\"executeNavCommand('cd experience')\">experience</a> |\n            <a onclick=\"executeNavCommand('education')\">education</a> |\n            <a onclick=\"executeNavCommand('skills')\">skills</a> |\n            <a onclick=\"executeNavCommand('cd projects')\">projects</a> |\n            <a onclick=\"executeNavCommand('contact')\">contact</a> |\n            <a onclick=\"executeNavCommand('chatbot')\" style=\"background: linear-gradient(90deg, #00ff00, #5BCEFA); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold;\">\ud83e\udd16 chatbot</a> |\n            <a onclick=\"executeNavCommand('clear')\">clear</a>\n        </div>\n    </div>\n\n    <!-- Main Container -->\n    <div class=\"main-container\">\n        <!-- 3D Viewer Section (Left) -->\n        <div class=\"viewer-section\">\n            <spline-viewer url=\"https://prod.spline.design/eBO7I-xKw00YnaYL/scene.splinecode\"></spline-viewer>\n        </div>\n\n        <!-- Terminal Section (Right) -->\n        <div class=\"terminal-section\">\n            <div class=\"terminal-box\">\n                <!-- Terminal Header -->\n                <div class=\"terminal-header\">\n                    <div class=\"terminal-button\"></div>\n                    <div class=\"terminal-button\"></div>\n                    <div class=\"terminal-button\"></div>\n                    <div class=\"terminal-title\">bassam@portfolio:~</div>\n                </div>\n\n                <!-- Terminal Output -->\n                <div class=\"terminal-output\" id=\"terminalOutput\">\n                    <!-- Output will be inserted here -->\n                </div>\n\n                <!-- Terminal Input -->\n                <div class=\"terminal-input-line\">\n                    <span class=\"username\">bassam@portfolio</span>\n                    <span class=\"separator\">:</span>\n                    <span class=\"directory\" id=\"currentDir\">~</span>\n                    <span class=\"separator\">$ </span>\n                    <input type=\"text\" id=\"commandInput\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\">\n                </div>\n\n                <!-- Terminal Footer (Fixed Welcome Text) -->\n                <div class=\"terminal-footer\">\n                    <div class=\"welcome-text\">\n                        Type <span class=\"highlight\">'help'</span> to see all available commands | \n                        Type <span class=\"highlight\">'chatbot'</span> to chat with AI \ud83e\udd16 | \n                        Type <span class=\"highlight\">'ls'</span> to explore the file system<br>\n                        Tip: Use <span class=\"highlight\">TAB</span> for auto-completion and <span class=\"highlight\">\u2191\u2193</span> arrows for command history\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const terminalOutput = document.getElementById('terminalOutput');\n        const commandInput = document.getElementById('commandInput');\n        const currentDirElement = document.getElementById('currentDir');\n        let commandHistory = [];\n        let historyIndex = -1;\n        let currentDir = '~';\n        let chatMode = false;\n        let chatHistory = [];\n        \n        // Google Sheets Analytics Configuration\n        const GOOGLE_SHEET_URL = 'https://script.google.com/macros/s/AKfycbxWblq8swF_Q8YgyMNOufr1S4hcM5pkJY5qNKfJjDRNAxbeVFaoF79hFjroxHZdLV_KMg/exec';\n        \n        // Generate unique session ID\n        const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n        \n        // Detect user info\n        let userCountry = 'Unknown';\n        let userDevice = /Mobile|Android|iPhone|iPad/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop';\n        let userBrowser = navigator.userAgent.includes('Chrome') ? 'Chrome' : \n                          navigator.userAgent.includes('Firefox') ? 'Firefox' : \n                          navigator.userAgent.includes('Safari') ? 'Safari' : 'Other';\n\n        // Analytics Functions\n        async function getCountry() {\n            try {\n                const response = await fetch('https://ipapi.co/json/');\n                const data = await response.json();\n                userCountry = data.country_name || 'Unknown';\n            } catch (error) {\n                userCountry = 'Unknown';\n            }\n        }\n\n        async function logVisitor() {\n            if (!GOOGLE_SHEET_URL) return;\n            \n            try {\n                await fetch(GOOGLE_SHEET_URL, {\n                    method: 'POST',\n                    mode: 'no-cors',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        type: 'visitor',\n                        country: userCountry,\n                        device: userDevice,\n                        browser: userBrowser,\n                        page: 'Home'\n                    })\n                });\n            } catch (error) {\n                console.log('Analytics logging failed (silent)');\n            }\n        }\n\n        async function logChatMessage(userMsg, aiMsg) {\n            if (!GOOGLE_SHEET_URL) return;\n            \n            try {\n                await fetch(GOOGLE_SHEET_URL, {\n                    method: 'POST',\n                    mode: 'no-cors',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        type: 'chat',\n                        userMessage: userMsg,\n                        aiResponse: aiMsg,\n                        sessionId: sessionId,\n                        country: userCountry\n                    })\n                });\n            } catch (error) {\n                console.log('Chat logging failed (silent)');\n            }\n        }\n\n        // File system (same as before)\n        const fileSystem = {\n            '~': {\n                type: 'dir',\n                contents: {\n                    'about.txt': { \n                        type: 'file', \n                        content: `Name: Bassam Walid Aljazzar\nRole: Mechatronics Engineer / Electromechanical Engineer / Robotics Engineer\nLocation: Abu Dhabi, United Arab Emirates\nNationality: Palestinian\n\nBio:\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\nAs a Mechatronics Engineer with 8 years of experience, I am an expert in \n3D design, complex system analysis and modifications, and Python development. \nI have a solid educational background and research experience as a research \nassistant at UAE University. \n\nI have built a Humanoid robot named \"Bu Saif\" and contributed to a patent \n(US11573635) for a face mask with EMG sensors for communication. \n\nI possess excellent communication and leadership skills and have a passion \nfor robotics and automation. I am confident that I can bring innovation, \nquality, and creativity to any organization.\n\nInterests:\n  \u2022 Drawing\n  \u2022 3D Designing\n  \u2022 Kung Fu\n  \u2022 Robotics\n\nLanguages:\n  \u2022 Arabic (Native)\n  \u2022 English (Advanced)` \n                    },\n                    'skills.txt': { \n                        type: 'file', \n                        content: `Technical Skills\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n3D Design & CAD:\n  \u2022 SolidWorks 3D Design       \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n  \u2022 Fusion 360 3D Design       \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n  \u2022 Autodesk AutoCAD           \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n\nProgramming & Software:\n  \u2022 Python Programming         \u2b50\u2b50\u2b50\u2b50 Experienced\n  \u2022 ROS (Robot Operating Sys)  \u2b50\u2b50\u2b50\u2b50 Skillful\n  \u2022 Embedded Systems           \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n  \u2022 Microsoft Office           \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n\nRobotics & Electronics:\n  \u2022 Robotics                   \u2b50\u2b50\u2b50\u2b50 Experienced\n  \u2022 Electronics Hardware       \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n  \u2022 Proteus                    \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n\nManufacturing & Machines:\n  \u2022 CNC Machines               \u2b50\u2b50\u2b50\u2b50 Experienced\n  \u2022 Laser Cutting Machines     \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n  \u2022 3D Printing Machine        \u2b50\u2b50\u2b50\u2b50\u2b50 Expert\n\nSpecializations:\n  \u2713 Mechatronics Systems Design\n  \u2713 Complex System Analysis & Modifications\n  \u2713 3D Design & Prototyping\n  \u2713 Robotics & Automation\n  \u2713 Embedded Systems Development\n  \u2713 Python Development\n  \u2713 PLC Programming\n  \u2713 Solar Energy Systems` \n                    },\n                    'contact.txt': { \n                        type: 'file', \n                        content: `Contact Information\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\ud83d\udce7 Email:    b_aljazzar@yahoo.com\n\ud83d\udcf1 Phone:    +971 56 611 3381\n\ud83d\udccd Location: Abu Dhabi, United Arab Emirates\n\ud83d\udcbc LinkedIn: https://www.linkedin.com/in/bassam-aljazzar\n\nAvailability:\n  \u2022 Open for full-time opportunities\n  \u2022 Available for consulting projects\n  \u2022 Open to collaboration on robotics projects\n\nResponse Time:\n  \u2022 Usually within 24 hours\n  \u2022 For urgent matters, please call\n\nFeel free to reach out for:\n  \u2713 Job opportunities\n  \u2713 Robotics & Mechatronics consulting\n  \u2713 Research collaboration\n  \u2713 Technical workshops & training\n  \u2713 Speaking engagements` \n                    },\n                    'education.txt': { \n                        type: 'file', \n                        content: `Education Background\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\ud83c\udf93 Bachelor of Science in Mechatronics Engineering\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nUniversity: Al-Azhar University-Gaza\nLocation: Gaza, Palestine\nDuration: October 2011 - May 2017\nDegree: BSc in Mechatronics Engineering\n\nAbout Mechatronics Engineering:\nMechatronics engineering is a multidisciplinary field that combines \nprinciples of mechanical, electrical, and computer engineering to \ncreate complex systems that are efficient, reliable, and versatile.\n\nGraduation Project: \"Shrimp Rover Robot\"\nThe graduation project explained the meaning of Mechatronics, as it \nwas a robot combining Mechanics, Electronics, and Control.` \n                    },\n                    'projects': {\n                        type: 'dir',\n                        contents: {\n                            'README.md': { \n                                type: 'file', \n                                content: `My Projects & Achievements\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nUse 'ls' to see all projects, then 'cat <filename>' to read details.\n\nFeatured Projects:\n  \u2022 busaif-2020.md    - Bu Saif Humanoid Robot (Latest)\n  \u2022 busaif-2019.md    - Bu Saif Robot (GITEX 2019)\n  \u2022 meta-touch.md     - Meta Touch Elevator Project\n  \u2022 shrimp-rover.md   - Shrimp Rover Robot\n  \u2022 patent.md         - US Patent 11573635` \n                            },\n                            'busaif-2020.md': { \n                                type: 'file', \n                                content: `Bu Saif Humanoid Robot 2020-2021\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nI built a Python program for Bu Saif to perform a mini-mental state \nexamination (MMSE). The program includes questions that the robot \nasks patients and automatically evaluates answers.\n\nFeatures:\n  \u2713 Works to read attention and interaction\n  \u2713 Calculates response time automatically\n  \u2713 Provides real-time feedback\n\nCollaboration: UAE University & Dubai Health Authority\nFocus: Treatment of elderly with cognitive functions\n\nStatus: \u2705 Completed & Deployed` \n                            },\n                            'busaif-2019.md': { \n                                type: 'file', \n                                content: `Bu Saif Humanoid Robot 2019\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nBuilt Humanoid Intelligent Robot \"Bu Saif\" from scratch, presented \nat GITEX 2019 Exhibition in Dubai.\n\nFeatures:\n  \u2022 Python-based NLP\n  \u2022 Understands Arabic human text\n  \u2022 Can respond naturally\n  \u2022 Silicon head with actuators\n  \u2022 Body with arms\n\nExhibition: GITEX 2019, Dubai, UAE\nStatus: \u2705 Successfully Exhibited` \n                            },\n                            'meta-touch.md': { \n                                type: 'file', \n                                content: `Meta Touch Project 2020\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nDeveloped touchless elevator button system to avoid COVID-19 spread.\n\nFeatures:\n  \u2713 No physical contact required\n  \u2713 Compatible with existing elevators\n  \u2713 Fast response time\n\nImpact: Helped reduce virus transmission\nStatus: \u2705 Production & Commercial` \n                            },\n                            'shrimp-rover.md': { \n                                type: 'file', \n                                content: `Shrimp Rover Robot 2016\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nGraduation project - specialized robot with six wheels designed to \novercome obstacles, inspired by shrimp movement.\n\nFeatures:\n  \u2713 Six-wheeled configuration\n  \u2713 Independent motor control\n  \u2713 All-terrain capability\n\nStatus: \u2705 Completed (Graduation Project)` \n                            },\n                            'patent.md': { \n                                type: 'file', \n                                content: `United States Patent 11573635\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nTitle: Face mask for accurate location of sensors relative to a \nuser's face, a communication enabling face mask, and a communication \nsystem including the face mask.\n\nPatent Number: US11573635\n\nContributed to developing innovative face mask equipped with EMG \nsensors for communication purposes.\n\nLink: https://patentimages.storage.googleapis.com/73/15/54/9ddd67aef63072/US11573635.pdf\n\nStatus: \u2705 Patent Granted` \n                            }\n                        }\n                    },\n                    'experience': {\n                        type: 'dir',\n                        contents: {\n                            'README.md': { \n                                type: 'file', \n                                content: `Work Experience\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nPositions:\n  \u2022 current-job.txt   - Mechatronics Engineer (2021-Present)\n  \u2022 research.txt      - Research Assistant (2019-2021)\n  \u2022 fadel-trading.txt - Mechatronics Engineer (2018-2019)\n  \u2022 flash-tech.txt    - Mechatronics Engineer (2017)` \n                            },\n                            'current-job.txt': { \n                                type: 'file', \n                                content: `Mechatronics Engineer\nTatweer Middle East and Africa\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\ud83d\udcc5 June 2021 - Present\n\ud83d\udccd Abu Dhabi, UAE\n\ud83c\udfe2 Ministry of Interior - Manufacturing Innovation Laboratory\n\nResponsibilities:\n  \u2713 Develop innovative solutions for Ministry challenges\n  \u2713 Python development for custom software\n  \u2713 Embedded systems development\n  \u2713 Training courses and workshops\n  \u2713 Technical consulting\n\nStatus: \ud83d\udfe2 Current Position` \n                            },\n                            'research.txt': { \n                                type: 'file', \n                                content: `Research Assistant\nUnited Arab Emirates University\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\ud83d\udcc5 May 2019 - May 2021\n\ud83d\udccd Al Ain, UAE\n\nKey Projects:\n  \u2022 Bu Saif Humanoid Robot\n  \u2022 COVID-19 ventilator prototypes\n  \u2022 Meta Touch project\n  \u2022 Patent US11573635\n\nStatus: \u2705 Completed` \n                            },\n                            'fadel-trading.txt': { \n                                type: 'file', \n                                content: `Mechatronics Engineer\nFadel Al Dhaheri General Trading\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\ud83d\udcc5 November 2018 - April 2019\n\ud83d\udccd Dubai, UAE\n\nResponsibilities:\n  \u2022 Massage chairs maintenance\n  \u2022 Toy machines maintenance\n  \u2022 Motherboards maintenance\n\nStatus: \u2705 Completed` \n                            },\n                            'flash-tech.txt': { \n                                type: 'file', \n                                content: `Mechatronics Engineer\nFlash Tech Company\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\ud83d\udcc5 June 2017 - November 2017\n\ud83d\udccd Gaza, Palestine\n\nResponsibilities:\n  \u2022 Solar energy systems installation\n  \u2022 PLC programming\n  \u2022 Electrical systems maintenance\n\nStatus: \u2705 Completed` \n                            }\n                        }\n                    }\n                }\n            }\n        };\n\n        // Commands (same as before)\n        const commands = {\n            help: () => `Available Commands\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nFile System:\n  ls              - List directory contents\n  cd <dir>        - Change directory\n  pwd             - Print working directory\n  cat <file>      - Display file contents\n  tree            - Display directory tree\n  cd ..           - Go to parent directory\n\nQuick Info:\n  about           - About Bassam Aljazzar\n  skills          - Technical skills\n  projects        - Projects overview\n  experience      - Work experience\n  education       - Educational background\n  contact         - Contact information\n\nAI Assistant:\n  chatbot         - \ud83e\udd16 Chat with AI about Bassam & Mechatronics\n\nSystem:\n  clear           - Clear terminal\n  history         - Show command history\n  help            - Show this help\n  whoami          - Display current user\n  date            - Display current date`,\n\n            ls: (args) => {\n                const path = args[0] || currentDir;\n                const dir = getDirectory(path);\n                \n                if (!dir || dir.type !== 'dir') {\n                    return `ls: cannot access '${path}': No such file or directory`;\n                }\n                \n                const items = Object.keys(dir.contents);\n                return items.map(item => {\n                    const isDir = dir.contents[item].type === 'dir';\n                    const color = isDir ? '#5BCEFA' : '#00ff00';\n                    const suffix = isDir ? '/' : '';\n                    return `<span style=\"color: ${color}; font-weight: ${isDir ? 'bold' : 'normal'}\">${item}${suffix}</span>`;\n                }).join('  ');\n            },\n\n            cd: (args) => {\n                if (!args[0] || args[0] === '~') {\n                    currentDir = '~';\n                    currentDirElement.textContent = '~';\n                    // Show welcome message when returning to home\n                    setTimeout(() => {\n                        addOutput(`<pre style=\"color: #00ff00; line-height: 1.2; font-size: 0.75em;\">\n \u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2557         \u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \n \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2551    \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551         \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u255a\u2550\u2550\u2588\u2588\u2588\u2554\u255d\u255a\u2550\u2550\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\n \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2588\u2588\u2554\u2588\u2588\u2551    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551         \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551  \u2588\u2588\u2588\u2554\u255d   \u2588\u2588\u2588\u2554\u255d \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\n \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u255a\u2588\u2588\u2554\u255d\u2588\u2588\u2551    \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551    \u2588\u2588   \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551 \u2588\u2588\u2588\u2554\u255d   \u2588\u2588\u2588\u2554\u255d  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\n \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551 \u255a\u2550\u255d \u2588\u2588\u2551    \u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u255a\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\n \u255a\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d     \u255a\u2550\u255d    \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\n</pre>`);\n                        addOutput(`<span style=\"color: #5BCEFA; font-weight: bold;\">Welcome to Bassam Aljazzar's Interactive Portfolio Terminal</span>\n\n<span style=\"color: #F5A9B8;\">Mechatronics Engineer | Robotics Specialist | Innovation Consultant</span>\n<span style=\"color: #00ff00;\">\ud83d\udccd Abu Dhabi, UAE | 8 Years Experience | Patent Holder (US11573635)</span>\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501`);\n                    }, 100);\n                    return '';\n                }\n                \n                const newDir = args[0];\n                if (newDir === '..') {\n                    if (currentDir !== '~') {\n                        const parts = currentDir.split('/').filter(p => p !== '~');\n                        parts.pop();\n                        currentDir = parts.length > 0 ? `~/${parts.join('/')}` : '~';\n                        currentDirElement.textContent = currentDir;\n                    }\n                    return '';\n                }\n                \n                const targetPath = currentDir === '~' ? `~/${newDir}` : `${currentDir}/${newDir}`;\n                const dir = getDirectory(targetPath);\n                \n                if (!dir) {\n                    return `cd: ${newDir}: No such file or directory`;\n                }\n                \n                if (dir.type !== 'dir') {\n                    return `cd: ${newDir}: Not a directory`;\n                }\n                \n                currentDir = targetPath;\n                currentDirElement.textContent = currentDir;\n                return '';\n            },\n\n            pwd: () => currentDir.replace('~', '/home/bassam'),\n\n            cat: (args) => {\n                if (!args[0]) {\n                    return 'cat: missing file operand';\n                }\n                \n                const file = getFile(args[0]);\n                \n                if (!file) {\n                    return `cat: ${args[0]}: No such file or directory`;\n                }\n                \n                if (file.type === 'dir') {\n                    return `cat: ${args[0]}: Is a directory`;\n                }\n                \n                return file.content;\n            },\n\n            tree: () => {\n                const buildTree = (obj, prefix = '', isLast = true) => {\n                    const keys = Object.keys(obj.contents || {});\n                    let result = '';\n                    \n                    keys.forEach((key, index) => {\n                        const isLastItem = index === keys.length - 1;\n                        const item = obj.contents[key];\n                        const connector = isLastItem ? '\u2514\u2500\u2500 ' : '\u251c\u2500\u2500 ';\n                        const isDir = item.type === 'dir';\n                        const color = isDir ? '#5BCEFA' : '#00ff00';\n                        \n                        result += `${prefix}${connector}<span style=\"color: ${color}; font-weight: ${isDir ? 'bold' : 'normal'}\">${key}${isDir ? '/' : ''}</span>\\n`;\n                        \n                        if (isDir && item.contents) {\n                            const newPrefix = prefix + (isLastItem ? '    ' : '\u2502   ');\n                            result += buildTree(item, newPrefix, isLastItem);\n                        }\n                    });\n                    \n                    return result;\n                };\n                \n                const dir = getDirectory(currentDir);\n                return `<span style=\"color: #5BCEFA; font-weight: bold\">${currentDir}/</span>\\n` + buildTree(dir);\n            },\n\n            clear: () => {\n                terminalOutput.innerHTML = '';\n                return null;\n            },\n\n            whoami: () => 'bassam',\n\n            date: () => new Date().toString(),\n\n            echo: (args) => args.join(' '),\n\n            history: () => commandHistory.map((cmd, i) => `  ${i + 1}  ${cmd}`).join('\\n'),\n\n            about: () => commands.cat(['about.txt']),\n            skills: () => commands.cat(['skills.txt']),\n            contact: () => commands.cat(['contact.txt']),\n            education: () => commands.cat(['education.txt']),\n            projects: () => 'Navigate: cd projects && ls && cat <project-file>',\n            experience: () => 'Navigate: cd experience && ls && cat <position-file>',\n\n            sudo: (args) => {\n                const fullCmd = args.join(' ');\n                if (fullCmd === 'rm -rf /') {\n                    return '\ud83d\ude31 Nice try! But I\\'m not deleting my portfolio!';\n                }\n                return '[sudo] password for bassam: \\nSorry, no sudo access here \ud83d\ude04';\n            },\n\n            chatbot: () => {\n                chatMode = true;\n                chatHistory = [];\n                currentDirElement.textContent = '\ud83e\udd16 AI Chat';\n                return `<span style=\"color: #5BCEFA; font-weight: bold;\">\ud83e\udd16 AI Chatbot Activated!</span>\n\n<span style=\"color: #00ff00;\">I'm Bassam's AI assistant. I can help you with:</span>\n  \u2022 Information about Bassam's background and experience\n  \u2022 Details about his mechatronics projects\n  \u2022 Explanations about mechatronics engineering\n  \u2022 Questions about robotics and automation\n\n<span style=\"color: #F5A9B8;\">Type your question and press Enter to chat.</span>\n<span style=\"color: #888;\">Type 'exit' to return to terminal mode.</span>\n\n<span style=\"color: #666; font-size: 0.9em;\">\ud83d\udcdd Note: Conversations are logged for quality improvement.</span>\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501`;\n            }\n        };\n\n\n// AI chat with Function Calling for Spline control\nlet lastRequestTime = 0;\nconst MIN_REQUEST_INTERVAL = 5500;\n\n// \ud83c\udfac Spline Control Function\nfunction triggerPatentView() {\n  try {\n    const splineViewer = document.querySelector('spline-viewer');\n    \n    if (!splineViewer) {\n      console.warn('\u26a0\ufe0f Spline viewer not found');\n      return { success: false, message: 'Spline viewer not available' };\n    }\n    \n    console.log('\ud83c\udfac Triggering patent view in 3D lab...');\n    \n    // \u062c\u0631\u0651\u0628 \u0627\u0644\u0637\u0631\u0642 \u0627\u0644\u0645\u062e\u062a\u0644\u0641\u0629 \u0644\u0644\u062a\u0641\u0627\u0639\u0644 \u0645\u0639 Spline\n    try {\n      // Method 1: Direct event emission\n      if (typeof splineViewer.emitEvent === 'function') {\n        splineViewer.emitEvent('mouseDown', 'RedMask');\n      }\n      \n      // Method 2: Access through runtime (\u064a\u0634\u062a\u063a\u0644 \u0628\u0639\u062f \u0645\u0627 \u064a\u062d\u0645\u0651\u0644)\n      const tryRuntime = () => {\n        if (splineViewer.runtime) {\n          const mask = splineViewer.runtime.findObjectByName('RedMask') || \n                       splineViewer.runtime.findObjectByName('patent_mask');\n          if (mask) {\n            splineViewer.runtime.emitEvent('mouseDown', mask);\n          }\n        }\n      };\n      \n      // \u062c\u0631\u0651\u0628 \u0641\u0648\u0631\u0627\u064b \u0648\u0628\u0639\u062f delay\n      tryRuntime();\n      setTimeout(tryRuntime, 100);\n      \n    } catch (e) {\n      console.log('Spline interaction attempt:', e.message);\n    }\n    \n    // Visual feedback \u0641\u064a \u0627\u0644\u0640 terminal\n    addOutput(`<span style=\"color:#5BCEFA;\">\ud83c\udfad \u2190 \u0627\u0646\u0638\u0631 \u0644\u0644\u0645\u062e\u062a\u0628\u0631 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a \u0623\u0639\u0644\u0627\u0647! \u062a\u0645 \u062a\u0641\u0639\u064a\u0644 \u0639\u0631\u0636 \u0627\u0644\u0628\u0631\u0627\u0621\u0629.</span>`);\n    \n    return { \n      success: true, \n      message: 'Patent view activated in 3D lab. User can click the red mask above the mannequin to view the patent document.' \n    };\n    \n  } catch (error) {\n    console.error('\u274c Spline control error:', error);\n    return { success: false, message: error.message };\n  }\n}\n\nasync function sendChatMessage(userMessage) {\n  console.log('\ud83d\ude80 Starting chat request...');\n  \n  if (window.__aiBusy) {\n    return `<span style=\"color:#ffbd2e;\">\u23f3 \u0627\u0646\u062a\u0638\u0631 \u0642\u0644\u064a\u0644\u0627\u064b...</span>`;\n  }\n\n  const now = Date.now();\n  const timeSinceLastRequest = now - lastRequestTime;\n  console.log(`\u23f1\ufe0f Time since last request: ${timeSinceLastRequest}ms`);\n  \n  if (timeSinceLastRequest < MIN_REQUEST_INTERVAL) {\n    const waitTime = Math.ceil((MIN_REQUEST_INTERVAL - timeSinceLastRequest) / 1000);\n    console.log(`\u26a0\ufe0f Rate limit triggered. Wait ${waitTime}s`);\n    return `<span style=\"color:#ffa500;\">\u23f1\ufe0f \u0627\u0646\u062a\u0638\u0631 ${waitTime} \u062b\u0627\u0646\u064a\u0629 \u0642\u0628\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062a\u0627\u0644\u064a\u0629</span>`;\n  }\n\n  window.__aiBusy = true;\n  lastRequestTime = now;\n\n  const systemPrompt = `You are Bassam Aljazzar's AI assistant. Your role is to provide information about Bassam and answer questions about mechatronics engineering.\n\nABOUT BASSAM:\n- Name: Bassam Walid Aljazzar\n- Role: Mechatronics Engineer / Robotics Engineer\n- Location: Abu Dhabi, UAE\n- Experience: 8 years in robotics, automation, and innovation\n- Nationality: Palestinian\n- Languages: Arabic (Native), English (Advanced)\n\nEDUCATION:\n- BSc in Mechatronics Engineering from Al-Azhar University-Gaza (2011-2017)\n- Graduation Project: \"Shrimp Rover Robot\" - a six-wheeled robot inspired by shrimp movement\n\nCURRENT POSITION (June 2021 - Present):\n- Mechatronics Engineer at Tatweer Middle East and Africa\n- Consultant at UAE Ministry of Interior's Manufacturing Innovation Laboratory\n- Develops innovative solutions, Python software, and embedded systems\n- Conducts training courses and workshops\n\nKEY PROJECTS:\n1. Bu Saif Humanoid Robot (2020-2021): Python-based robot for mini-mental state examination (MMSE) for elderly patients with cognitive functions, in collaboration with UAE University and Dubai Health Authority\n2. Bu Saif Humanoid Robot (2019): Arabic-speaking humanoid robot presented at GITEX 2019 Exhibition in Dubai\n3. Meta Touch Project (2020): Touchless elevator button system to prevent COVID-19 transmission, now in commercial production\n4. US Patent 11573635: Contributed to developing face mask with EMG sensors for communication. The patent document can be viewed by clicking the red mask in the 3D virtual lab.\n5. Shrimp Rover Robot (2016): Graduation project with six-wheeled design for obstacle navigation\n\nTECHNICAL SKILLS:\n- 3D Design: SolidWorks, Fusion 360, AutoCAD (Expert level)\n- Programming: Python (Experienced), ROS, Embedded Systems (Expert)\n- Robotics & Electronics: Expert in robotics, electronics hardware, Proteus\n- Manufacturing: CNC Machines, Laser Cutting, 3D Printing (Expert)\n\nWORK EXPERIENCE:\n- Research Assistant at UAE University (May 2019 - May 2021): Led Bu Saif robot project, COVID-19 prototypes\n- Mechatronics Engineer at Fadel Al Dhaheri General Trading (Nov 2018 - Apr 2019): Equipment maintenance\n- Mechatronics Engineer at Flash Tech Company (Jun 2017 - Nov 2017): Solar energy systems and PLC programming\n\nINTERESTS:\n- Drawing, 3D Designing, Kung Fu, Robotics\n\nCONTACT:\n- Email: b_aljazzar@yahoo.com\n- Phone: +971 56 611 3381\n- LinkedIn: linkedin.com/in/bassam-aljazzar\n\nMECHATRONICS ENGINEERING:\nMechatronics is a multidisciplinary field combining mechanical, electrical, and computer engineering to create efficient, reliable, and versatile systems. It includes robotics, automation, control systems, embedded systems, and IoT.\n\nWhen answering:\n- Be helpful, professional, and friendly\n- Focus on Bassam's expertise in robotics and mechatronics\n- Explain technical concepts clearly\n- Highlight his projects and achievements\n- If asked about topics outside Bassam's portfolio or mechatronics, politely redirect to relevant topics\n- Keep responses concise but informative\n- When users ask about the patent (\u0628\u0631\u0627\u0621\u0629 \u0627\u0644\u0627\u062e\u062a\u0631\u0627\u0639, patent document, US11573635, face mask patent), use the show_patent_in_3d_lab function to highlight it in the virtual lab`;\n\n  const thinkingDiv = document.createElement('div');\n  thinkingDiv.className = 'output-line';\n  thinkingDiv.innerHTML = `<span style=\"color:#888;font-style:italic;\">\ud83e\udd16 AI is thinking...</span>`;\n  terminalOutput.appendChild(thinkingDiv);\n  terminalOutput.scrollTop = terminalOutput.scrollHeight;\n\n  const recentHistory = chatHistory.slice(-8);\n  const messages = [\n    { role: 'system', content: systemPrompt },\n    ...recentHistory,\n    { role: 'user', content: userMessage }\n  ];\n\n  console.log(`\ud83d\udce4 Sending ${messages.length} messages to API`);\n\n  // \ud83d\udd27 Tools definition\n  const tools = [\n    {\n      type: \"function\",\n      function: {\n        name: \"show_patent_in_3d_lab\",\n        description: \"Highlights and activates the patent document view in the 3D virtual lab. Use this when user asks about the patent, wants to see the patent document, or asks about US Patent 11573635 or the face mask patent.\",\n        parameters: {\n          type: \"object\",\n          properties: {},\n          required: []\n        }\n      }\n    }\n  ];\n\n  async function tryAPI(attempt = 1) {\n    console.log(`\ud83d\udd04 Attempt ${attempt}/2`);\n    \n    // POST attempt with Function Calling\n    try {\n      console.log('\ud83d\udcee Trying POST with Function Calling...');\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 30000);\n      \n      const response = await fetch('https://text.pollinations.ai/openai', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          messages: messages,\n          model: 'openai',\n          seed: 42,\n          referrer: 'bassamaljazzar93.github.io',\n          tools: tools,\n          tool_choice: 'auto' // \u0627\u0644\u0640 AI \u064a\u0642\u0631\u0631 \u0645\u062a\u0649 \u064a\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0640 function\n        }),\n        signal: controller.signal\n      });\n      \n      clearTimeout(timeoutId);\n      \n      console.log(`\ud83d\udce5 POST Response: ${response.status} ${response.statusText}`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        const message = data?.choices?.[0]?.message;\n        \n        if (!message) {\n          throw new Error('No message in response');\n        }\n        \n        // \ud83c\udfaf \u0641\u062d\u0635 \u0625\u0630\u0627 \u0627\u0644\u0640 AI \u0627\u0633\u062a\u062f\u0639\u0649 function\n        if (message.tool_calls && message.tool_calls.length > 0) {\n          console.log('\ud83d\udd27 AI requested function call!');\n          \n          const toolCall = message.tool_calls[0];\n          console.log(`\ud83d\udcde Calling: ${toolCall.function.name}`);\n          \n          if (toolCall.function.name === 'show_patent_in_3d_lab') {\n            // \ud83c\udfac \u0634\u063a\u0651\u0644 \u0627\u0644\u0640 function\n            const result = triggerPatentView();\n            console.log('\u2705 Function executed:', result);\n            \n            // \ud83d\udd04 \u0623\u0631\u062c\u0639 \u0627\u0644\u0640 result \u0644\u0644\u0640 AI \u0639\u0634\u0627\u0646 \u064a\u0643\u0645\u0644 \u0627\u0644\u0631\u062f\n            messages.push(message); // \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0640 AI \u0645\u0639 tool_call\n            messages.push({\n              role: 'tool',\n              tool_call_id: toolCall.id,\n              name: toolCall.function.name,\n              content: JSON.stringify(result)\n            });\n            \n            // \ud83d\udd01 \u0637\u0644\u0628 \u062b\u0627\u0646\u064a \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0631\u062f \u0627\u0644\u0646\u0647\u0627\u0626\u064a\n            const secondResponse = await fetch('https://text.pollinations.ai/openai', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                messages: messages,\n                model: 'openai',\n                seed: 42,\n                referrer: 'bassamaljazzar93.github.io'\n              })\n            });\n            \n            if (secondResponse.ok) {\n              const finalData = await secondResponse.json();\n              const finalText = finalData?.choices?.[0]?.message?.content;\n              if (finalText) {\n                console.log('\u2705 POST Success with Function!');\n                return finalText;\n              }\n            }\n          }\n        }\n        \n        // \u0631\u062f \u0639\u0627\u062f\u064a \u0628\u062f\u0648\u0646 function call\n        const text = message.content;\n        if (text) {\n          console.log('\u2705 POST Success!');\n          return text;\n        }\n      }\n      \n      if (response.status === 429) {\n        console.log('\ud83d\udeab Rate limit hit (429)');\n        throw new Error('RATE_LIMIT');\n      }\n      \n      const errorText = await response.text().catch(() => 'no body');\n      console.log('\u274c POST failed:', errorText);\n      \n    } catch (e) {\n      if (e.message === 'RATE_LIMIT') throw e;\n      console.log('\u274c POST error:', e.message);\n    }\n\n    // GET fallback (\u0628\u062f\u0648\u0646 function calling)\n    try {\n      console.log('\ud83d\udcee Trying GET fallback...');\n      const lastAssistant = [...recentHistory]\n        .reverse()\n        .find(m => m.role === 'assistant')?.content || '';\n      \n      const prompt = [\n        lastAssistant ? `Previous: ${lastAssistant.substring(0, 150)}` : '',\n        `User: ${userMessage}`\n      ].filter(Boolean).join('\\n\\n');\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 30000);\n      \n      const url = `https://text.pollinations.ai/${encodeURIComponent(prompt)}?model=openai&seed=42&referrer=bassamaljazzar93.github.io&system=${encodeURIComponent(systemPrompt)}`;\n      \n      const response = await fetch(url, { signal: controller.signal });\n      clearTimeout(timeoutId);\n      \n      console.log(`\ud83d\udce5 GET Response: ${response.status} ${response.statusText}`);\n      \n      if (response.ok) {\n        const text = await response.text();\n        if (text) {\n          console.log('\u2705 GET Success!');\n          \n          // \ud83d\udd0d Keyword detection \u0643\u0640 fallback\n          const patentKeywords = ['patent', '\u0628\u0631\u0627\u0621\u0629', '11573635', 'mask', '\u0642\u0646\u0627\u0639'];\n          if (patentKeywords.some(kw => text.toLowerCase().includes(kw) || userMessage.toLowerCase().includes(kw))) {\n            console.log('\ud83c\udfaf Patent keyword detected in fallback');\n            setTimeout(() => triggerPatentView(), 500);\n          }\n          \n          return text;\n        }\n      }\n      \n      if (response.status === 429) {\n        console.log('\ud83d\udeab Rate limit hit (429)');\n        throw new Error('RATE_LIMIT');\n      }\n      \n    } catch (e) {\n      if (e.message === 'RATE_LIMIT') throw e;\n      console.log('\u274c GET error:', e.message);\n    }\n\n    if (attempt < 2) {\n      console.log('\u23f3 Waiting 6s before retry...');\n      await new Promise(r => setTimeout(r, 6000));\n      return tryAPI(attempt + 1);\n    }\n    \n    throw new Error('ALL_FAILED');\n  }\n\n  try {\n    const text = await tryAPI();\n    thinkingDiv.remove();\n    \n    chatHistory.push(\n      { role: 'user', content: userMessage },\n      { role: 'assistant', content: text }\n    );\n    \n    if (chatHistory.length > 16) {\n      chatHistory = chatHistory.slice(-16);\n    }\n    \n    logChatMessage(userMessage, text);\n    console.log('\u2705 Chat completed successfully');\n    return `<span style=\"color:#5BCEFA;\">\ud83e\udd16 AI:</span> ${text}`;\n    \n  } catch (error) {\n    thinkingDiv.remove();\n    console.error('\ud83d\udca5 Final error:', error.message);\n    \n    if (error.message === 'RATE_LIMIT') {\n      return `<span style=\"color:#ffa500;\">\u26a0\ufe0f \u062a\u0645 \u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u062d\u062f \u0627\u0644\u0645\u0633\u0645\u0648\u062d. \u0627\u0646\u062a\u0638\u0631 6 \u062b\u0648\u0627\u0646\u064a</span>`;\n    }\n    \n    return `<span style=\"color:#ff6b6b;\">\u274c \u0641\u0634\u0644 \u0627\u0644\u0627\u062a\u0635\u0627\u0644. \u062c\u0631\u0651\u0628 \u0645\u0631\u0629 \u062b\u0627\u0646\u064a\u0629</span>`;\n  } finally {\n    window.__aiBusy = false;\n  }\n}\n        function getDirectory(path) {\n            if (path === '~') return fileSystem['~'];\n            \n            const parts = path.replace('~/', '').replace('~', '').split('/').filter(p => p);\n            let current = fileSystem['~'];\n            \n            for (const part of parts) {\n                if (!current.contents || !current.contents[part]) {\n                    return null;\n                }\n                current = current.contents[part];\n            }\n            \n            return current;\n        }\n\n        function getFile(filename) {\n            const dir = getDirectory(currentDir);\n            if (!dir || !dir.contents) return null;\n            return dir.contents[filename];\n        }\n\n        function addOutput(content, isCommand = false, commandText = '') {\n            const div = document.createElement('div');\n            div.className = 'output-line';\n            \n            if (isCommand) {\n                if (chatMode) {\n                    div.innerHTML = `<span style=\"color: #5BCEFA;\">\ud83d\udc64 You:</span> <span class=\"command\">${commandText}</span>`;\n                } else {\n                    div.innerHTML = `<span class=\"username\">bassam@portfolio</span><span class=\"separator\">:</span><span class=\"directory\">${currentDir}</span><span class=\"separator\">$ </span><span class=\"command\">${commandText}</span>`;\n                }\n            } else {\n                div.innerHTML = content;\n            }\n            \n            terminalOutput.appendChild(div);\n            terminalOutput.scrollTop = terminalOutput.scrollHeight;\n        }\n\n        function executeCommand(input) {\n            const trimmed = input.trim();\n            if (!trimmed) return;\n\n            commandHistory.push(trimmed);\n            historyIndex = -1;\n\n            // Check if in chat mode\n            if (chatMode) {\n                if (trimmed.toLowerCase() === 'exit') {\n                    chatMode = false;\n                    chatHistory = [];\n                    currentDir = '~';\n                    currentDirElement.textContent = '~';\n                    addOutput('', true, trimmed);\n                    addOutput('<span style=\"color: #00ff00;\">\u2713 Exited chat mode. Back to terminal.</span>');\n                    return;\n                }\n\n                // Send message to AI\n                addOutput('', true, trimmed);\n                sendChatMessage(trimmed).then(response => {\n                    addOutput(response);\n                });\n                return;\n            }\n\n            addOutput('', true, trimmed);\n\n            const [cmd, ...args] = trimmed.split(' ');\n            const command = commands[cmd];\n\n            const output = command ? command(args) : `bash: ${cmd}: command not found\\nType 'help' for available commands.`;\n\n            if (output !== null) {\n                addOutput(output);\n            }\n        }\n\n        // Nav click handler\n        function executeNavCommand(cmd) {\n            commandInput.value = cmd;\n            executeCommand(cmd);\n            commandInput.value = '';\n            // Don't auto-focus on mobile after nav command\n            if (window.innerWidth > 768) {\n                commandInput.focus();\n            }\n        }\n\n        // Event listeners\n        commandInput.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter') {\n                executeCommand(commandInput.value);\n                commandInput.value = '';\n            } else if (e.key === 'ArrowUp') {\n                e.preventDefault();\n                if (commandHistory.length > 0) {\n                    historyIndex = historyIndex === -1 ? commandHistory.length - 1 : Math.max(0, historyIndex - 1);\n                    commandInput.value = commandHistory[historyIndex];\n                }\n            } else if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                if (historyIndex !== -1) {\n                    historyIndex++;\n                    if (historyIndex >= commandHistory.length) {\n                        historyIndex = -1;\n                        commandInput.value = '';\n                    } else {\n                        commandInput.value = commandHistory[historyIndex];\n                    }\n                }\n            } else if (e.key === 'Tab') {\n                e.preventDefault();\n                const matches = Object.keys(commands).filter(cmd => cmd.startsWith(commandInput.value.toLowerCase()));\n                if (matches.length === 1) {\n                    commandInput.value = matches[0];\n                }\n            } else if (e.key === 'l' && e.ctrlKey) {\n                e.preventDefault();\n                commands.clear();\n            }\n        });\n\n        // Focus input only when clicking on terminal or input itself\n        terminalOutput.addEventListener('click', (e) => {\n            commandInput.focus();\n        });\n\n        commandInput.addEventListener('click', () => {\n            commandInput.focus();\n        });\n\n        // Prevent 3D viewer from focusing input\n        const viewerSection = document.querySelector('.viewer-section');\n        if (viewerSection) {\n            viewerSection.addEventListener('touchstart', (e) => {\n                // Don't focus input when touching 3D viewer\n                e.stopPropagation();\n            });\n            \n            viewerSection.addEventListener('click', (e) => {\n                // Don't focus input when clicking 3D viewer\n                e.stopPropagation();\n            });\n        }\n\n        // Welcome message\n        window.addEventListener('load', async () => {\n            // Fix viewport height for mobile browsers (especially iOS)\n            const setViewportHeight = () => {\n                const vh = window.innerHeight * 0.01;\n                document.documentElement.style.setProperty('--vh', `${vh}px`);\n            };\n            \n            setViewportHeight();\n            window.addEventListener('resize', setViewportHeight);\n            window.addEventListener('orientationchange', setViewportHeight);\n            \n            // Get country and log visitor\n            await getCountry();\n            logVisitor();\n            \n            addOutput(`<pre style=\"color: #00ff00; line-height: 1.2; font-size: 0.75em;\">\n \u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2557         \u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \n \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2551    \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551         \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u255a\u2550\u2550\u2588\u2588\u2588\u2554\u255d\u255a\u2550\u2550\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\n \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2588\u2588\u2554\u2588\u2588\u2551    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551         \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551  \u2588\u2588\u2588\u2554\u255d   \u2588\u2588\u2588\u2554\u255d \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\n \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u255a\u2588\u2588\u2554\u255d\u2588\u2588\u2551    \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551    \u2588\u2588   \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551 \u2588\u2588\u2588\u2554\u255d   \u2588\u2588\u2588\u2554\u255d  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\n \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551 \u255a\u2550\u255d \u2588\u2588\u2551    \u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u255a\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\n \u255a\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d     \u255a\u2550\u255d    \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\n</pre>`);\n            addOutput(`<span style=\"color: #5BCEFA; font-weight: bold;\">Welcome to Bassam Aljazzar's Interactive Portfolio Terminal</span>\n\n<span style=\"color: #F5A9B8;\">Mechatronics Engineer | Robotics Specialist | Innovation Consultant</span>\n<span style=\"color: #00ff00;\">\ud83d\udccd Abu Dhabi, UAE | 8 Years Experience | Patent Holder (US11573635)</span>\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501`);\n            \n            // Don't auto-focus on mobile to prevent keyboard popup\n            if (window.innerWidth > 768) {\n                commandInput.focus();\n            }\n        });\n    </script>\n</body>\n</html>";
        }

        function updatePreview() {
            const preview = document.getElementById('previewFrame');
            const code = editor.getValue();
            preview.srcdoc = code;
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            const apiKey = document.getElementById('apiKey').value.trim();

            if (!message) return;

            if (!apiKey) {
                alert(currentLanguage === 'en' ? 
                    'Please enter your Groq API key first!' : 
                    'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÖŸÅÿ™ÿßÿ≠ Groq API ÿ£ŸàŸÑÿßŸã!');
                return;
            }

            // Add user message
            addChatMessage('user', message);
            input.value = '';

            // Disable send button
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="loading"></span>';

            try {
                const currentCode = editor.getValue();
                const response = await callGroqAPI(apiKey, message, currentCode);
                
                // Add AI response
                addChatMessage('ai', response.message);

                // Apply code changes if any
                if (response.code) {
                    editor.setValue(response.code);
                    updatePreview();
                }
            } catch (error) {
                addChatMessage('ai', `Error: ${error.message}`);
                console.error('Groq API Error:', error);
            } finally {
                sendBtn.disabled = false;
                sendBtn.textContent = currentLanguage === 'en' ? 'Send' : 'ÿ•ÿ±ÿ≥ÿßŸÑ';
            }
        }

        async function callGroqAPI(apiKey, userMessage, currentCode) {
            const systemPrompt = `You are an expert web developer assistant. Help users customize their portfolio HTML code.
When the user asks for changes:
1. Analyze the current code
2. Make the requested modifications
3. Return the complete modified HTML code
4. Explain what you changed

Always return your response in this JSON format:
{
    "message": "Explanation of changes made",
    "code": "Complete modified HTML code (or null if just answering questions)"
}

Current code:
${currentCode}`;

            const response = await fetch(GROQ_API_URL, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: 'llama-3.3-70b-versatile',
                    messages: [
                        { role: 'system', content: systemPrompt },
                        { role: 'user', content: userMessage }
                    ],
                    temperature: 0.7,
                    max_tokens: 4000
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.error?.message || 'API request failed');
            }

            const data = await response.json();
            const aiResponse = data.choices[0].message.content;

            // Try to parse JSON response
            try {
                return JSON.parse(aiResponse);
            } catch {
                // If not JSON, treat as plain message
                return { message: aiResponse, code: null };
            }
        }

        function addChatMessage(type, content) {
            const container = document.getElementById('chatContainer');
            const message = document.createElement('div');
            message.className = `chat-message ${type}`;
            
            const label = document.createElement('div');
            label.className = 'label';
            label.textContent = type === 'user' ? 
                (currentLanguage === 'en' ? 'You' : 'ÿ£ŸÜÿ™') : 
                (currentLanguage === 'en' ? 'AI Assistant' : 'ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∞ŸÉŸä');
            
            const text = document.createElement('div');
            text.textContent = content;
            
            message.appendChild(label);
            message.appendChild(text);
            container.appendChild(message);
            
            container.scrollTop = container.scrollHeight;
        }

        function quickAction(action) {
            const actions = {
                color: currentLanguage === 'en' ? 
                    'Change the color scheme to a modern blue and orange gradient' :
                    'ÿ∫Ÿäÿ± ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ÿ•ŸÑŸâ ÿ™ÿØÿ±ÿ¨ ÿ£ÿ≤ÿ±ŸÇ Ÿàÿ®ÿ±ÿ™ŸÇÿßŸÑŸä ÿπÿµÿ±Ÿä',
                font: currentLanguage === 'en' ?
                    'Change the font to a more modern sans-serif font' :
                    'ÿ∫Ÿäÿ± ÿßŸÑÿÆÿ∑ ÿ•ŸÑŸâ ÿÆÿ∑ sans-serif ÿπÿµÿ±Ÿä',
                section: currentLanguage === 'en' ?
                    'Add a new "Experience" section with a timeline layout' :
                    'ÿ£ÿ∂ŸÅ ŸÇÿ≥ŸÖ "ÿßŸÑÿÆÿ®ÿ±ÿßÿ™" ÿ¨ÿØŸäÿØ ÿ®ÿ™ÿµŸÖŸäŸÖ ÿÆÿ∑ ÿ≤ŸÖŸÜŸä',
                animation: currentLanguage === 'en' ?
                    'Add smooth animations to all sections on scroll' :
                    'ÿ£ÿ∂ŸÅ ÿ≠ÿ±ŸÉÿßÿ™ ÿ≥ŸÑÿ≥ÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ ÿπŸÜÿØ ÿßŸÑÿ™ŸÖÿ±Ÿäÿ±'
            };

            document.getElementById('userInput').value = actions[action];
            sendMessage();
        }

        function copyCode() {
            const code = editor.getValue();
            navigator.clipboard.writeText(code).then(() => {
                alert(currentLanguage === 'en' ? 'Code copied to clipboard!' : 'ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ!');
            });
        }

        function downloadCode() {
            const code = editor.getValue();
            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'portfolio.html';
            a.click();
            URL.revokeObjectURL(url);
        }

        function resetCode() {
            if (confirm(currentLanguage === 'en' ? 
                'Reset to default template?' : 
                'ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ•ŸÑŸâ ÿßŸÑŸÇÿßŸÑÿ® ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿü')) {
                editor.setValue(getPortfolioTemplate());
                updatePreview();
            }
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ar' : 'en';
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            
            // Update all translatable elements
            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLanguage}`);
            });

            document.querySelectorAll('[data-en-placeholder]').forEach(el => {
                el.placeholder = el.getAttribute(`data-${currentLanguage}-placeholder`);
            });

            // Update language button
            document.querySelector('.lang-switch').textContent = 
                currentLanguage === 'en' ? 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' : 'English';
        }
    </script>
</body>
</html>
